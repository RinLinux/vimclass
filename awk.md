# AWK

### awk简介

awk 是一种很棒的语言，它适合文本处理和报表生成，其语法较为常见，借鉴了某些语言的一些精华，如 C 语言等。在 linux 系统日常处理工作中，发挥很重要的作用，掌握了 awk将会使你的工作变的高大上。

现在常用的是Unix系统中原始的awk的GNU版本gawk。

在awk中可以完成以下工作：

+ 定义变量来保存数据
+ 使用算术和字符串操作符来处理数据
+ 使用结构化编程概念来增加处理逻辑
+ 通过提取数据文件中的数据元素，将其格式化排列，生成报告

#### awk使用方法

```shell
awk '{pattern + action}' files
```

其中 pattern 表示 AWK 在数据中查找的内容，而 action 是在找到匹配内容时所执行的一系列命令。花括号（{}）不需要在程序中始终出现，但它们用于根据特定的模式对一系列指令进行分组。 pattern就是要表示的正则表达式，用斜杠括起来。

awk语言的最基本功能是在文件或者字符串中基于指定规则浏览和抽取信息，awk抽取信息后，才能进行其他文本操作。完整的awk脚本通常用来格式化文本文件中的信息。

通常，awk是以文件的一行为处理单位的。awk每接收文件的一行，然后执行相应的命令，来处理文本。

###### awk程序的基本格式如下：

```shell
awk options program file
```

常用的选项（options）包括：

+ -F fs, 指定行中划分数据字段的字段分隔符
+ -f file, 从指定的呃呃文件中读取程序

###### 使用数据字段变量

awk会根据内部变量FS将每一行进行分割，然后自动给一行中的没一个数据元素分配一个变量，默认情况下会按照以下方式分配变量：

+ $0 代表整个文本行
+ $1代表文本行中的第1个数据字段
+ $2代表文本行中的第2个数据字段
+ $n代表文本行中的第n个数据字段

通常使用FS变量或者-F指定数据字段的字段分隔符，默认情况为空格或者制表符

###### 在程序中使用多个命令

awk允许将多个命令组合成一个正常的程序，在命令之间添加分号就可以，另外可以将程序保存在文件中，然后在命令行中引用，使用-f选项即可。

```shell
$ cat code.awk
! /^#/ {print $1,$6}
```

```shell
$ awk -F":" -f code.awk /etc/passwd
nobody /var/empty
root /var/root
daemon /var/root
_uucp /var/spool/uucp
_taskgated /var/empty
```



























ref:https://www.cnblogs.com/ginvip/p/6352157.html

